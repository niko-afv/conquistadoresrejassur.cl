-- phpMyAdmin SQL Dump
-- version 3.5.4
-- http://www.phpmyadmin.net
--
-- Servidor: localhost
-- Tiempo de generación: 01-02-2013 a las 04:59:17
-- Versión del servidor: 5.5.29
-- Versión de PHP: 5.4.10

SET SQL_MODE="NO_AUTO_VALUE_ON_ZERO";
SET time_zone = "+00:00";


/*!40101 SET @OLD_CHARACTER_SET_CLIENT=@@CHARACTER_SET_CLIENT */;
/*!40101 SET @OLD_CHARACTER_SET_RESULTS=@@CHARACTER_SET_RESULTS */;
/*!40101 SET @OLD_COLLATION_CONNECTION=@@COLLATION_CONNECTION */;
/*!40101 SET NAMES utf8 */;

--
-- Base de datos: `CONQUIS_REJAS_SUR`
--

-- --------------------------------------------------------

--
-- Estructura de tabla para la tabla `APODERADOS`
--

CREATE TABLE IF NOT EXISTS `APODERADOS` (
  `RUT` varchar(10) NOT NULL,
  `NOMBRE` varchar(50) NOT NULL,
  `APELLIDO` varchar(50) DEFAULT NULL,
  `TELEFONO` varchar(15) DEFAULT NULL,
  PRIMARY KEY (`RUT`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;

--
-- Volcado de datos para la tabla `APODERADOS`
--

INSERT INTO `APODERADOS` (`RUT`, `NOMBRE`, `APELLIDO`, `TELEFONO`) VALUES
('88811111-1', 'MARCOS', 'DÌAZ', '1234567'),
('88822222-2', 'CHERIE', 'PASTENES', '1234567');

-- --------------------------------------------------------

--
-- Estructura de tabla para la tabla `CARGOS`
--

CREATE TABLE IF NOT EXISTS `CARGOS` (
  `ID` int(11) NOT NULL AUTO_INCREMENT,
  `NOMBRE` varchar(45) DEFAULT NULL,
  PRIMARY KEY (`ID`)
) ENGINE=InnoDB  DEFAULT CHARSET=utf8 AUTO_INCREMENT=4 ;

--
-- Volcado de datos para la tabla `CARGOS`
--

INSERT INTO `CARGOS` (`ID`, `NOMBRE`) VALUES
(1, 'DIRECTOR'),
(2, 'CONSEJERO'),
(3, 'INTEGRANTE');

-- --------------------------------------------------------

--
-- Estructura de tabla para la tabla `INTEGRANTES`
--

CREATE TABLE IF NOT EXISTS `INTEGRANTES` (
  `RUT` varchar(10) NOT NULL,
  `NOMBRE` varchar(100) NOT NULL,
  `APELLIDO` varchar(100) DEFAULT NULL,
  `EDAD` int(2) unsigned NOT NULL,
  `TELEFONO_PRINCIPAL` varchar(15) DEFAULT NULL,
  `TELEFONO_AUXILIAR` varchar(15) DEFAULT NULL,
  `DIRECCION` varchar(255) DEFAULT NULL,
  `EMAIL` varchar(50) DEFAULT NULL,
  `FOTO` varchar(255) DEFAULT NULL,
  `ESTADO` int(1) unsigned NOT NULL DEFAULT '1',
  `RUT_APODERADO` varchar(10) NOT NULL,
  `RANGO` int(11) NOT NULL,
  `CARGO` int(11) NOT NULL,
  PRIMARY KEY (`RUT`),
  KEY `NOMBRE` (`NOMBRE`),
  KEY `fk_INTEGRANTES_APODERADOS1_idx` (`RUT_APODERADO`),
  KEY `fk_INTEGRANTES_RANGOS1_idx` (`RANGO`),
  KEY `fk_INTEGRANTES_CARGOS1_idx` (`CARGO`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;

--
-- Volcado de datos para la tabla `INTEGRANTES`
--

INSERT INTO `INTEGRANTES` (`RUT`, `NOMBRE`, `APELLIDO`, `EDAD`, `TELEFONO_PRINCIPAL`, `TELEFONO_AUXILIAR`, `DIRECCION`, `EMAIL`, `FOTO`, `ESTADO`, `RUT_APODERADO`, `RANGO`, `CARGO`) VALUES
('11111111-1', 'IVAN', 'TAPÍA', 17, '1234567', '12345678', 'DIRECCION 1', 'IVAN@TAPIA.CL', NULL, 1, '88822222-2', 1, 2),
('11122222-2', 'CATALINA', 'DÍAZ', 13, '1234567', '12345678', 'DIRECCIÓN 2', 'CATALINA@DIAZ.CL', NULL, 1, '88811111-1', 1, 3);

-- --------------------------------------------------------

--
-- Estructura de tabla para la tabla `RANGOS`
--

CREATE TABLE IF NOT EXISTS `RANGOS` (
  `RANGOS` int(11) NOT NULL AUTO_INCREMENT,
  `NOMBRE` varchar(100) DEFAULT NULL,
  PRIMARY KEY (`RANGOS`)
) ENGINE=InnoDB  DEFAULT CHARSET=utf8 AUTO_INCREMENT=3 ;

--
-- Volcado de datos para la tabla `RANGOS`
--

INSERT INTO `RANGOS` (`RANGOS`, `NOMBRE`) VALUES
(1, 'CONQUISTADOR'),
(2, 'GUIA MAYOR');

-- --------------------------------------------------------

--
-- Estructura de tabla para la tabla `UNIDADES`
--

CREATE TABLE IF NOT EXISTS `UNIDADES` (
  `ID` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `NOMBRE` varchar(50) NOT NULL,
  `FUNDADO` varchar(10) DEFAULT NULL,
  `ESTADO` int(1) unsigned NOT NULL DEFAULT '1',
  PRIMARY KEY (`ID`),
  UNIQUE KEY `NOMBRE` (`NOMBRE`)
) ENGINE=InnoDB  DEFAULT CHARSET=utf8 AUTO_INCREMENT=11 ;

--
-- Volcado de datos para la tabla `UNIDADES`
--

INSERT INTO `UNIDADES` (`ID`, `NOMBRE`, `FUNDADO`, `ESTADO`) VALUES
(9, 'CENTURIONES', '2008', 1),
(10, 'EXPLORADORES', '2009', 1);

-- --------------------------------------------------------

--
-- Estructura de tabla para la tabla `UNIDADES_TRAYECTORIA`
--

CREATE TABLE IF NOT EXISTS `UNIDADES_TRAYECTORIA` (
  `ID` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `TEMPORADA` varchar(10) NOT NULL,
  `FOTO_UNIDAD` varchar(255) DEFAULT NULL,
  `GRITO_UNIDAD` varchar(255) DEFAULT NULL,
  `ID_UNIDAD` int(11) unsigned NOT NULL,
  PRIMARY KEY (`ID`),
  KEY `ID_UNIDAD` (`ID_UNIDAD`)
) ENGINE=InnoDB  DEFAULT CHARSET=utf8 AUTO_INCREMENT=5 ;

--
-- Volcado de datos para la tabla `UNIDADES_TRAYECTORIA`
--

INSERT INTO `UNIDADES_TRAYECTORIA` (`ID`, `TEMPORADA`, `FOTO_UNIDAD`, `GRITO_UNIDAD`, `ID_UNIDAD`) VALUES
(3, '2008', 'FOTO 1', 'GRITO 1', 9),
(4, '2009', 'FOTO 2', 'GRITO 2', 10);

-- --------------------------------------------------------

--
-- Estructura de tabla para la tabla `UNIDADES_TRAYECTORIA_INTEGRANTES`
--

CREATE TABLE IF NOT EXISTS `UNIDADES_TRAYECTORIA_INTEGRANTES` (
  `ID` int(11) NOT NULL AUTO_INCREMENT,
  `UNIDADES_TRAYECTORIA_ID` int(10) unsigned NOT NULL,
  `INTEGRANTES_RUT` varchar(10) NOT NULL,
  PRIMARY KEY (`ID`),
  KEY `fk_UNIDADES_TRAYECTORIA_INTEGRANTES_UNIDADES_TRAYECTORIA1_idx` (`UNIDADES_TRAYECTORIA_ID`),
  KEY `fk_UNIDADES_TRAYECTORIA_INTEGRANTES_INTEGRANTES1_idx` (`INTEGRANTES_RUT`)
) ENGINE=InnoDB  DEFAULT CHARSET=utf8 AUTO_INCREMENT=3 ;

--
-- Volcado de datos para la tabla `UNIDADES_TRAYECTORIA_INTEGRANTES`
--

INSERT INTO `UNIDADES_TRAYECTORIA_INTEGRANTES` (`ID`, `UNIDADES_TRAYECTORIA_ID`, `INTEGRANTES_RUT`) VALUES
(1, 3, '11111111-1'),
(2, 3, '11122222-2');

-- --------------------------------------------------------

--
-- Estructura de tabla para la tabla `UNIDAD_INTEGRANTE`
--

CREATE TABLE IF NOT EXISTS `UNIDAD_INTEGRANTE` (
  `ID` int(11) unsigned NOT NULL AUTO_INCREMENT,
  `ID_UNIDAD` int(11) unsigned NOT NULL,
  `RUT_INTEGRANTE` varchar(10) NOT NULL,
  `TEMPORADA` varchar(15) NOT NULL,
  PRIMARY KEY (`ID`),
  KEY `ID_UNIDAD` (`ID_UNIDAD`),
  KEY `ID_INTEGRANTE` (`RUT_INTEGRANTE`)
) ENGINE=InnoDB  DEFAULT CHARSET=utf8 AUTO_INCREMENT=5 ;

--
-- Volcado de datos para la tabla `UNIDAD_INTEGRANTE`
--

INSERT INTO `UNIDAD_INTEGRANTE` (`ID`, `ID_UNIDAD`, `RUT_INTEGRANTE`, `TEMPORADA`) VALUES
(3, 9, '11111111-1', '2008'),
(4, 10, '11122222-2', '2009');

-- --------------------------------------------------------

--
-- Estructura de tabla para la tabla `USUARIOS`
--

CREATE TABLE IF NOT EXISTS `USUARIOS` (
  `NOMBRE` varchar(15) NOT NULL,
  `CLAVE` varchar(255) NOT NULL,
  `ESTADO` int(1) unsigned NOT NULL DEFAULT '1',
  `ULTIMA_VISITA` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  PRIMARY KEY (`NOMBRE`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;

--
-- Volcado de datos para la tabla `USUARIOS`
--

INSERT INTO `USUARIOS` (`NOMBRE`, `CLAVE`, `ESTADO`, `ULTIMA_VISITA`) VALUES
('nks', '*F7B4286024AE7F9F7F415414C48D7A0F1872513A', 1, '2013-02-01 03:34:59');

--
-- Restricciones para tablas volcadas
--

--
-- Filtros para la tabla `INTEGRANTES`
--
ALTER TABLE `INTEGRANTES`
  ADD CONSTRAINT `fk_INTEGRANTES_APODERADOS1` FOREIGN KEY (`RUT_APODERADO`) REFERENCES `APODERADOS` (`RUT`) ON DELETE NO ACTION ON UPDATE NO ACTION,
  ADD CONSTRAINT `fk_INTEGRANTES_RANGOS1` FOREIGN KEY (`RANGO`) REFERENCES `RANGOS` (`RANGOS`) ON DELETE NO ACTION ON UPDATE NO ACTION,
  ADD CONSTRAINT `fk_INTEGRANTES_CARGOS1` FOREIGN KEY (`CARGO`) REFERENCES `CARGOS` (`ID`) ON DELETE NO ACTION ON UPDATE NO ACTION;

--
-- Filtros para la tabla `UNIDADES_TRAYECTORIA`
--
ALTER TABLE `UNIDADES_TRAYECTORIA`
  ADD CONSTRAINT `UNIDADES_TRAYECTORIAS_ibfk_1` FOREIGN KEY (`ID_UNIDAD`) REFERENCES `UNIDADES` (`ID`) ON DELETE CASCADE ON UPDATE CASCADE;

--
-- Filtros para la tabla `UNIDADES_TRAYECTORIA_INTEGRANTES`
--
ALTER TABLE `UNIDADES_TRAYECTORIA_INTEGRANTES`
  ADD CONSTRAINT `fk_UNIDADES_TRAYECTORIA_INTEGRANTES_UNIDADES_TRAYECTORIA1` FOREIGN KEY (`UNIDADES_TRAYECTORIA_ID`) REFERENCES `UNIDADES_TRAYECTORIA` (`ID`) ON DELETE NO ACTION ON UPDATE NO ACTION,
  ADD CONSTRAINT `fk_UNIDADES_TRAYECTORIA_INTEGRANTES_INTEGRANTES1` FOREIGN KEY (`INTEGRANTES_RUT`) REFERENCES `INTEGRANTES` (`RUT`) ON DELETE NO ACTION ON UPDATE NO ACTION;

--
-- Filtros para la tabla `UNIDAD_INTEGRANTE`
--
ALTER TABLE `UNIDAD_INTEGRANTE`
  ADD CONSTRAINT `UNIDAD_INTEGRANTE_ibfk_1` FOREIGN KEY (`ID_UNIDAD`) REFERENCES `UNIDADES` (`ID`),
  ADD CONSTRAINT `UNIDAD_INTEGRANTE_ibfk_2` FOREIGN KEY (`RUT_INTEGRANTE`) REFERENCES `INTEGRANTES` (`RUT`) ON DELETE CASCADE ON UPDATE CASCADE;

/*!40101 SET CHARACTER_SET_CLIENT=@OLD_CHARACTER_SET_CLIENT */;
/*!40101 SET CHARACTER_SET_RESULTS=@OLD_CHARACTER_SET_RESULTS */;
/*!40101 SET COLLATION_CONNECTION=@OLD_COLLATION_CONNECTION */;
